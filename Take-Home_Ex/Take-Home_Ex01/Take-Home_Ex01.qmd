---
title: "Take Home Exercise 1"
subtitle: "Geospatial Analytics for Social Good: Application of Spatial and Spatio-temporal Point Patterns Analysis to discover the geographical distribution of Armed Conflict in Myanmar"
author: "Ooi Wen Xian"
date: "September 7, 2024"
date-modified: "last-modified"
execute: 
  eval: true
  echo: true
  freeze: true
---

# 1.0 Overview

## Background

Millions of people have their lives shattered by armed conflict – wars – every year.

Armed conflict has been on the rise since about 2012, after a decline in the 1990s and early 2000s. First came conflicts in Libya, Syria and Yemen, triggered by the 2011 Arab uprisings. Libya’s instability spilled south, helping set off a protracted crisis in the Sahel region. A fresh wave of major combat followed: the 2020 Azerbaijani-Armenian war over the Nagorno-Karabakh enclave, horrific fighting in Ethiopia’s northern Tigray region that began weeks later, the conflict prompted by the Myanmar army’s 2021 power grab and Russia’s 2022 assault on Ukraine. Add to those 2023’s devastation in Sudan and Gaza. Around the globe, more people are dying in fighting, being forced from their homes or in need of life-saving aid than in decades.

Source: [10 Conflicts to Watch in 2024](https://www.crisisgroup.org/global/10-conflicts-watch-2024)

## Study Objective

Geospatial analytics hold tremendous potential to address complex problems facing society. In this study, I would be applying spatial point patterns analysis methods to discover the spatial and spatio-temporal distribution of armed conflict in Myanmar.

## Context of Data

### Armed conflict data

For the purpose of this assignment, armed conflict data of Myanmar between 2021-2024 from [Armed Conflict Location & Event Data (ACLED)](https://acleddata.com/), an independent, impartial, international non-profit organization collecting data on violent conflict and protest in all countries and territories in the world, should be used.

In terms of event types, students should focus on at least four main event types, namely: Battles, Explosion/Remote violence, Strategic developments, and Violence against civilians.

In terms of study period, I would be focusing on quarterly armed conflict events from January 2021 until June 2024.

### GIS Data

-   [Geospatial data](http://geonode.themimu.info/layers/?limit=100&offset=0) on [Myanmar Information Management Unit, MIMU](http://www.themimu.info/)

# 2.0 Set-up
## Importing R packages

The following packages are used for this study:

-   sf, to import, manage and process vector-based geospatial data in R.

-   spatstat, to perform 1st- and 2nd-order spatial point patterns analysis and derive kernel density estimation (KDE) layer.

-   raster, to convert image output generate by spatstat into raster format.

-   tmap, to create thematic maps

```{r}
pacman::p_load(sp, sf, raster, spatstat, tmap, tidyverse, lubridate)
```

## Data Preprocessing
### Armed conflict data
```{r}
# Load the armed conflict data
conflict_data <- read_csv("data/raw/2021-01-01-2024-06-30-Southeast_Asia-Myanmar.csv")
```
Convert armed conflict data to sf format
```{r}
conflict_data
```
Myanmar falls within UTM Zone 47N and UTM Zone 48N.

For most parts of central and western Myanmar, UTM Zone 47N (EPSG: 32647) is used.
For the eastern regions, UTM Zone 48N (EPSG: 32648) is used.
Since the data spans across the entire country, I would be using EPSG: 32647 (UTM Zone 47N).

```{r}
# CRS 4326 is for WGS84 (used in GPS)
conflict_sf <- st_as_sf(conflict_data, 
                       coords = c("longitude", "latitude"),
                       crs=4326) %>%
  st_transform(crs = 32647)
```

```{r}
conflict_sf
```
```{r}
st_geometry(conflict_sf)
```
Looking at the attributes of conflict_sf, event_date is in chr format. We shall convert event_date to a date format.

```{r}
conflict_sf$event_date <- as.Date(conflict_sf$event_date, format = "%d %B %Y")
```

### Geospatial Data

```{r}
# Load the geospatial data
admin_boundaries_sf <- st_read(dsn = "data/raw",
                         layer = "mmr_polbnda2_adm1_250k_mimu_1") # MIMU boundary data
```
```{r}
admin_boundaries_sf <- st_transform(admin_boundaries_sf, 32647)
admin_boundaries_sf
```
```{r}
st_crs(admin_boundaries_sf)
```

```{r}
plot(admin_boundaries_sf)
```
```{r}
plot(st_geometry(admin_boundaries_sf))
```
```{r}
tmap_mode("plot")
qtm(admin_boundaries_sf)+tm_shape(conflict_sf)+tm_dots()
```
```{r}
tmap_mode("plot")
```

## Preparation for Spatial Point Analysis
### Converting sf data frames to sp’s Spatial* class
Using as_Spatial() of sf package to convert the data from simple feature data frame to sp’s Spatial* class.
```{r}
admin_boundaries_asp <- as_Spatial(admin_boundaries_sf)
conflict_asp <- as_Spatial(conflict_sf)
```

Let's view the content
```{r}
admin_boundaries_asp
```
```{r}
conflict_sf_asp
```
### Converting the Spatial* class into generic sp format
spatstat requires the analytical data in ppp object form. Hence, We need to convert the Spatial classes* into Spatial object first.
```{r}
admin_boundaries_sp <- as(admin_boundaries_asp, "SpatialPolygons")
conflict_sp <- as(conflict_asp, "SpatialPoints")
```

